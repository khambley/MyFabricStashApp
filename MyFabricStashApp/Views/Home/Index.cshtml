@model IEnumerable<MyFabricStashApp.Models.FabricListViewModel>
@{
    ViewBag.Title = "Upload Image";
    WebImage photo = null;
    var newFileName = "";
    var imagePath = "";

    if (IsPost)
    {
        photo = WebImage.GetImageFromRequest();
        if(photo != null)
        {
            newFileName = Guid.NewGuid().ToString() + "_" + Path.GetFileName(photo.FileName);
            imagePath = @"images\" + newFileName;

            photo.Save(@"~\" + imagePath);
            
        }
    }
}
<h1>Fabric List</h1>
@foreach (var item in Model)
{
    <div class="media">
        <div class="media-left">
            <a href="#">
                <img class="media-object" src="@item.ImagePath" alt="" />
            </a>
        </div>
        <div class="media-body">
            <h4 class="media-heading">@item.MainCategory / @item.SubCategory1 / @item.SubCategory2</h4>
            Name: @item.Name<br />
            Quantity: @item.Quantity yd<br />
            Item Location: @item.Location<br />
            Items Sold to Date: <span style="color: red; font-weight: bold">@item.ItemsSold</span><br />
            Purchases: @item.PurchaseCount
        </div>
        <hr />
    </div>
}

<div class="row">
    <div class="col-md-4">
        <form action="" method="post" enctype="multipart/form-data">
            <fieldset>
                <label for="Image">Image</label>
                <input type="file" name="Image" />
                <br />
                <input type="submit" value="Upload" />
            </fieldset>
        </form> 
        <h1>Uploaded Image</h1>
        @if(imagePath != "")
        {
            <div class="result">
                <img src="..\@imagePath" alt="image" />
            </div>
        }
    </div>
</div>